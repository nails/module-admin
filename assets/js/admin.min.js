!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(e,t,n){
/*!
 * clipboard.js v2.0.4
 * https://zenorocha.github.io/clipboard.js
 * 
 * Licensed MIT Â© Zeno Rocha
 */
var r;r=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=l(n(1)),a=l(n(3)),s=l(n(4));function l(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.resolveOptions(n),r.listenClick(e),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"resolveOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof e.action?e.action:this.defaultAction,this.target="function"==typeof e.target?e.target:this.defaultTarget,this.text="function"==typeof e.text?e.text:this.defaultText,this.container="object"===r(e.container)?e.container:document.body}},{key:"listenClick",value:function(e){var t=this;this.listener=(0,s.default)(e,"click",(function(e){return t.onClick(e)}))}},{key:"onClick",value:function(e){var t=e.delegateTarget||e.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new o.default({action:this.action(t),target:this.target(t),text:this.text(t),container:this.container,trigger:t,emitter:this})}},{key:"defaultAction",value:function(e){return u("action",e)}},{key:"defaultTarget",value:function(e){var t=u("target",e);if(t)return document.querySelector(t)}},{key:"defaultText",value:function(e){return u("text",e)}},{key:"destroy",value:function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}],[{key:"isSupported",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["copy","cut"],t="string"==typeof e?[e]:e,n=!!document.queryCommandSupported;return t.forEach((function(e){n=n&&!!document.queryCommandSupported(e)})),n}}]),t}(a.default);function u(e,t){var n="data-clipboard-"+e;if(t.hasAttribute(n))return t.getAttribute(n)}e.exports=c},function(e,t,n){"use strict";var r,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(2),s=(r=a)&&r.__esModule?r:{default:r},l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.resolveOptions(t),this.initSelection()}return o(e,[{key:"resolveOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action=e.action,this.container=e.container,this.emitter=e.emitter,this.target=e.target,this.text=e.text,this.trigger=e.trigger,this.selectedText=""}},{key:"initSelection",value:function(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function(){var e=this,t="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandlerCallback=function(){return e.removeFake()},this.fakeHandler=this.container.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[t?"right":"left"]="-9999px";var n=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top=n+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,this.container.appendChild(this.fakeElem),this.selectedText=(0,s.default)(this.fakeElem),this.copyText()}},{key:"removeFake",value:function(){this.fakeHandler&&(this.container.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(this.container.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function(){this.selectedText=(0,s.default)(this.target),this.copyText()}},{key:"copyText",value:function(){var e=void 0;try{e=document.execCommand(this.action)}catch(t){e=!1}this.handleResult(e)}},{key:"handleResult",value:function(e){this.emitter.emit(e?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function(){this.trigger&&this.trigger.focus(),window.getSelection().removeAllRanges()}},{key:"destroy",value:function(){this.removeFake()}},{key:"action",set:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"copy";if(this._action=e,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(e){if(void 0!==e){if(!e||"object"!==(void 0===e?"undefined":i(e))||1!==e.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&e.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(e.hasAttribute("readonly")||e.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=e}},get:function(){return this._target}}]),e}();e.exports=l},function(e,t){e.exports=function(e){var t;if("SELECT"===e.nodeName)e.focus(),t=e.value;else if("INPUT"===e.nodeName||"TEXTAREA"===e.nodeName){var n=e.hasAttribute("readonly");n||e.setAttribute("readonly",""),e.select(),e.setSelectionRange(0,e.value.length),n||e.removeAttribute("readonly"),t=e.value}else{e.hasAttribute("contenteditable")&&e.focus();var r=window.getSelection(),i=document.createRange();i.selectNodeContents(e),r.removeAllRanges(),r.addRange(i),t=r.toString()}return t}},function(e,t){function n(){}n.prototype={on:function(e,t,n){var r=this.e||(this.e={});return(r[e]||(r[e]=[])).push({fn:t,ctx:n}),this},once:function(e,t,n){var r=this;function i(){r.off(e,i),t.apply(n,arguments)}return i._=t,this.on(e,i,n)},emit:function(e){for(var t=[].slice.call(arguments,1),n=((this.e||(this.e={}))[e]||[]).slice(),r=0,i=n.length;r<i;r++)n[r].fn.apply(n[r].ctx,t);return this},off:function(e,t){var n=this.e||(this.e={}),r=n[e],i=[];if(r&&t)for(var o=0,a=r.length;o<a;o++)r[o].fn!==t&&r[o].fn._!==t&&i.push(r[o]);return i.length?n[e]=i:delete n[e],this}},e.exports=n},function(e,t,n){var r=n(5),i=n(6);e.exports=function(e,t,n){if(!e&&!t&&!n)throw new Error("Missing required arguments");if(!r.string(t))throw new TypeError("Second argument must be a String");if(!r.fn(n))throw new TypeError("Third argument must be a Function");if(r.node(e))return function(e,t,n){return e.addEventListener(t,n),{destroy:function(){e.removeEventListener(t,n)}}}(e,t,n);if(r.nodeList(e))return function(e,t,n){return Array.prototype.forEach.call(e,(function(e){e.addEventListener(t,n)})),{destroy:function(){Array.prototype.forEach.call(e,(function(e){e.removeEventListener(t,n)}))}}}(e,t,n);if(r.string(e))return function(e,t,n){return i(document.body,e,t,n)}(e,t,n);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}},function(e,t){t.node=function(e){return void 0!==e&&e instanceof HTMLElement&&1===e.nodeType},t.nodeList=function(e){var n=Object.prototype.toString.call(e);return void 0!==e&&("[object NodeList]"===n||"[object HTMLCollection]"===n)&&"length"in e&&(0===e.length||t.node(e[0]))},t.string=function(e){return"string"==typeof e||e instanceof String},t.fn=function(e){return"[object Function]"===Object.prototype.toString.call(e)}},function(e,t,n){var r=n(7);function i(e,t,n,r,i){var a=o.apply(this,arguments);return e.addEventListener(n,a,i),{destroy:function(){e.removeEventListener(n,a,i)}}}function o(e,t,n,i){return function(n){n.delegateTarget=r(n.target,t),n.delegateTarget&&i.call(e,n)}}e.exports=function(e,t,n,r,o){return"function"==typeof e.addEventListener?i.apply(null,arguments):"function"==typeof n?i.bind(null,document).apply(null,arguments):("string"==typeof e&&(e=document.querySelectorAll(e)),Array.prototype.map.call(e,(function(e){return i(e,t,n,r,o)})))}},function(e,t){var n=9;if("undefined"!=typeof Element&&!Element.prototype.matches){var r=Element.prototype;r.matches=r.matchesSelector||r.mozMatchesSelector||r.msMatchesSelector||r.oMatchesSelector||r.webkitMatchesSelector}e.exports=function(e,t){for(;e&&e.nodeType!==n;){if("function"==typeof e.matches&&e.matches(t))return e;e=e.parentNode}}}])},e.exports=r()},function(e,t,n){var r,i,o,a;
/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */a=function(e){var t=Object.prototype.toString,n=Array.isArray||function(e){return"[object Array]"===t.call(e)};function r(e){return"function"==typeof e}function i(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function o(e,t){return null!=e&&"object"==typeof e&&t in e}var a=RegExp.prototype.test,s=/\S/;function l(e){return!function(e,t){return a.call(e,t)}(s,e)}var c={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},u=/\s*/,d=/\s+/,h=/\s*=/,f=/\s*\}/,p=/#|\^|\/|>|\{|&|=|!/;function m(e){this.string=e,this.tail=e,this.pos=0}function g(e,t){this.view=e,this.cache={".":this.view},this.parent=t}function y(){this.cache={}}m.prototype.eos=function(){return""===this.tail},m.prototype.scan=function(e){var t=this.tail.match(e);if(!t||0!==t.index)return"";var n=t[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n},m.prototype.scanUntil=function(e){var t,n=this.tail.search(e);switch(n){case-1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=t.length,t},g.prototype.push=function(e){return new g(e,this)},g.prototype.lookup=function(e){var t,n,i,a=this.cache;if(a.hasOwnProperty(e))t=a[e];else{for(var s,l,c,u=this,d=!1;u;){if(e.indexOf(".")>0)for(s=u.view,l=e.split("."),c=0;null!=s&&c<l.length;)c===l.length-1&&(d=o(s,l[c])||(n=s,i=l[c],null!=n&&"object"!=typeof n&&n.hasOwnProperty&&n.hasOwnProperty(i))),s=s[l[c++]];else s=u.view[e],d=o(u.view,e);if(d){t=s;break}u=u.parent}a[e]=t}return r(t)&&(t=t.call(this.view)),t},y.prototype.clearCache=function(){this.cache={}},y.prototype.parse=function(t,r){var o=this.cache,a=t+":"+(r||e.tags).join(":"),s=o[a];return null==s&&(s=o[a]=function(t,r){if(!t)return[];var o,a,s,c=!1,g=[],y=[],v=[],b=!1,w=!1,_="",$=0;function x(){if(b&&!w)for(;v.length;)delete y[v.pop()];else v=[];b=!1,w=!1}function k(e){if("string"==typeof e&&(e=e.split(d,2)),!n(e)||2!==e.length)throw new Error("Invalid tags: "+e);o=new RegExp(i(e[0])+"\\s*"),a=new RegExp("\\s*"+i(e[1])),s=new RegExp("\\s*"+i("}"+e[1]))}k(r||e.tags);for(var j,E,T,S,C,O,A=new m(t);!A.eos();){if(j=A.pos,T=A.scanUntil(o))for(var M=0,L=T.length;M<L;++M)l(S=T.charAt(M))?(v.push(y.length),_+=S):(w=!0,c=!0,_+=" "),y.push(["text",S,j,j+1]),j+=1,"\n"===S&&(x(),_="",$=0,c=!1);if(!A.scan(o))break;if(b=!0,E=A.scan(p)||"name",A.scan(u),"="===E?(T=A.scanUntil(h),A.scan(h),A.scanUntil(a)):"{"===E?(T=A.scanUntil(s),A.scan(f),A.scanUntil(a),E="&"):T=A.scanUntil(a),!A.scan(a))throw new Error("Unclosed tag at "+A.pos);if(C=">"==E?[E,T,j,A.pos,_,$,c]:[E,T,j,A.pos],$++,y.push(C),"#"===E||"^"===E)g.push(C);else if("/"===E){if(!(O=g.pop()))throw new Error('Unopened section "'+T+'" at '+j);if(O[1]!==T)throw new Error('Unclosed section "'+O[1]+'" at '+j)}else"name"===E||"{"===E||"&"===E?w=!0:"="===E&&k(T)}if(x(),O=g.pop())throw new Error('Unclosed section "'+O[1]+'" at '+A.pos);return function(e){for(var t,n=[],r=n,i=[],o=0,a=e.length;o<a;++o)switch((t=e[o])[0]){case"#":case"^":r.push(t),i.push(t),r=t[4]=[];break;case"/":i.pop()[5]=t[2],r=i.length>0?i[i.length-1][4]:n;break;default:r.push(t)}return n}(function(e){for(var t,n,r=[],i=0,o=e.length;i<o;++i)(t=e[i])&&("text"===t[0]&&n&&"text"===n[0]?(n[1]+=t[1],n[3]=t[3]):(r.push(t),n=t));return r}(y))}(t,r)),s},y.prototype.render=function(e,t,n,r){var i=this.parse(e,r),o=t instanceof g?t:new g(t);return this.renderTokens(i,o,n,e,r)},y.prototype.renderTokens=function(e,t,n,r,i){for(var o,a,s,l="",c=0,u=e.length;c<u;++c)s=void 0,"#"===(a=(o=e[c])[0])?s=this.renderSection(o,t,n,r):"^"===a?s=this.renderInverted(o,t,n,r):">"===a?s=this.renderPartial(o,t,n,i):"&"===a?s=this.unescapedValue(o,t):"name"===a?s=this.escapedValue(o,t):"text"===a&&(s=this.rawValue(o)),void 0!==s&&(l+=s);return l},y.prototype.renderSection=function(e,t,i,o){var a=this,s="",l=t.lookup(e[1]);if(l){if(n(l))for(var c=0,u=l.length;c<u;++c)s+=this.renderTokens(e[4],t.push(l[c]),i,o);else if("object"==typeof l||"string"==typeof l||"number"==typeof l)s+=this.renderTokens(e[4],t.push(l),i,o);else if(r(l)){if("string"!=typeof o)throw new Error("Cannot use higher-order sections without the original template");null!=(l=l.call(t.view,o.slice(e[3],e[5]),(function(e){return a.render(e,t,i)})))&&(s+=l)}else s+=this.renderTokens(e[4],t,i,o);return s}},y.prototype.renderInverted=function(e,t,r,i){var o=t.lookup(e[1]);if(!o||n(o)&&0===o.length)return this.renderTokens(e[4],t,r,i)},y.prototype.indentPartial=function(e,t,n){for(var r=t.replace(/[^ \t]/g,""),i=e.split("\n"),o=0;o<i.length;o++)i[o].length&&(o>0||!n)&&(i[o]=r+i[o]);return i.join("\n")},y.prototype.renderPartial=function(e,t,n,i){if(n){var o=r(n)?n(e[1]):n[e[1]];if(null!=o){var a=e[6],s=e[5],l=e[4],c=o;return 0==s&&l&&(c=this.indentPartial(o,l,a)),this.renderTokens(this.parse(c,i),t,n,c)}}},y.prototype.unescapedValue=function(e,t){var n=t.lookup(e[1]);if(null!=n)return n},y.prototype.escapedValue=function(t,n){var r=n.lookup(t[1]);if(null!=r)return e.escape(r)},y.prototype.rawValue=function(e){return e[1]},e.name="mustache.js",e.version="3.1.0",e.tags=["{{","}}"];var v=new y;return e.clearCache=function(){return v.clearCache()},e.parse=function(e,t){return v.parse(e,t)},e.render=function(e,t,r,i){if("string"!=typeof e)throw new TypeError('Invalid template! Template should be a "string" but "'+(n(o=e)?"array":typeof o)+'" was given as the first argument for mustache#render(template, view, partials)');var o;return v.render(e,t,r,i)},e.to_html=function(t,n,i,o){var a=e.render(t,n,i);if(!r(o))return a;o(a)},e.escape=function(e){return String(e).replace(/[&<>"'`=\/]/g,(function(e){return c[e]}))},e.Scanner=m,e.Context=g,e.Writer=y,e},t&&"string"!=typeof t.nodeName?a(t):(i=[t],void 0===(o="function"==typeof(r=a)?r.apply(t,i):r)||(e.exports=o))},function(e,t,n){},function(e,t,n){"use strict";n.r(t);n(2);var r=n(0),i=n.n(r);class o{constructor(e){this.$body=$("body"),this.$el=$(e),this.$icon=$("<div>").text("Copied").css({position:"absolute",left:0,top:0,background:"#000000",color:"#ffffff",zIndex:1e6,padding:"0.25rem 0.5rem",borderRadius:"3px",border:"1px solid #ffffff",fontSize:"0.8rem"}),this.clipboardJs=new i.a(e),this.clipboardJs.on("success",e=>{this.showIcon(),e.clearSelection()})}showIcon(){this.$icon.remove(),this.$body.append(this.$icon);this.calcOffsetTop();this.$icon.css({opacity:0,left:this.calcOffsetLeft(),top:this.calcOffsetTop()}).animate({opacity:1},100).delay(250).animate({opacity:0},250),setTimeout(()=>{this.$icon.remove()},600)}calcOffsetLeft(){return this.$el.offset().left+this.$el.outerWidth()/2-this.$icon.outerWidth()/2}calcOffsetTop(){return this.$el.offset().top-this.$icon.outerHeight()-5}}var a=class{constructor(){$(document).on("admin:js-copy-to-clipboard",(e,t)=>{$(t).addClass("js-copy-to-clipboard--initiated").each((e,t)=>{$(t).data("clipboardjs")||$(t).data("clipboardjs",new o(t))})}),$(document).on("admin:refresh-ui",()=>{$(document).trigger("admin:js-copy-to-clipboard",[".js-copy-to-clipboard"])}).trigger("admin:js-copy-to-clipboard",[".js-copy-to-clipboard"])}};var s=class{constructor(){return $(document).on("click",".btn-disabled",()=>!1),this}};var l=class{constructor(){return $(".js-admin-dynamic-table").each((e,t)=>{this.init($(t))}),this}init(e){e.trigger("dynamic-table:starting");let t=e.find(".js-admin-dynamic-table__template"),n=e.data("data")||[];e.data("template",t.html()),e.data("index",0),t.empty(),this.bindEvents(e,t);for(let r=0,i=n.length;r<i;r++)this.add(e,t,n[r]);return e.trigger("dynamic-table:ready"),this}bindEvents(e,t){return $(".js-admin-dynamic-table__add",e).on("click",()=>(this.add(e,t),!1)),e.on("click",".js-admin-dynamic-table__remove",t=>(this.remove(e,$(t.currentTarget).closest("tr")),!1)),this}add(e,t,n){(n=n||{}).index=e.data("index")||0;let r=$(Mustache.render(e.data("template"),n));return $("input[type=checkbox]",r).each((e,t)=>{let n=$(t);n[0].hasAttribute("data-dynamic-table-checked")&&n.prop("checked",n.attr("data-dynamic-table-checked"))}),$("select",r).each((e,t)=>{let n=$(t);if(n[0].hasAttribute("data-dynamic-table-value")){let e=n.data("dynamic-table-value");$('option[value="'+e+'"]',n).prop("selected",!0)}n.css("width","100%").select2()}),t.append(r),e.data("index",n.index+1),e.trigger("dynamic-table:add",[r]),e.find(".js-admin-sortable").trigger("sortable:sort"),$(document).trigger("admin:refresh-ui"),this}remove(e,t){return t.remove(),e.trigger("dynamic-table:remove"),e.find(".js-admin-sortable").trigger("sortable:sort"),$(document).trigger("admin:refresh-ui"),this}};var c=class{constructor(){return $("td.actions").each((e,t)=>{let n=$("> .btn, > .btn-group",t),r=[];n.each((e,t)=>{r.push(t.offsetTop)}),Math.max(...r)!==Math.min(...r)&&(n.addClass("btn-block"),n.filter(".btn-group").find("> .btn").addClass("btn-block"))}),this}};class u{constructor(){return $(".js-admin-notes").each((e,t)=>{let n=$(t),r=$("<span>").addClass("admin-notes__counter"),i=n.data("model-name"),o=n.data("model-provider"),a=n.data("id"),s=n.data("modal-title")||"Notes",l=n.data("modal-width")||500,c=n.data("modal-max-height")||750;n.append(r).on("click",()=>{let e=$("<div>").dialog({modal:!0,title:s,width:l,maxHeight:c,position:{my:"center",at:"center",of:window}});return this.load(e,i,o,a),!1}),this.countNotes(i,o,a).done(e=>{this.setCounter(e)})}),this}load(e,t,n,r){e.html($("<p>").text("Loading...")),this.loadNotes(t,n,r).done(i=>{let o=$("<ul>").addClass("admin-notes"),a=$("<li>").addClass("admin-notes__empty").append($("<p>").text("No notes recorded for this item"));if(o.append(a),i.data.length){a.hide();for(let t=0,n=i.data.length;t<n;t++)o.append(this.renderMessageItem(e,i.data[t].id,i.data[t].message,i.data[t].user,i.data[t].date))}let s=$("<li>"),l=$("<textarea>"),c=$("<button>").addClass("btn btn-block btn-primary").text("Add Note").on("click",()=>{this.saveNote(t,n,r,l.val()).done(t=>{l.val(""),$(".admin-notes__empty",e).hide(),s.before(this.renderMessageItem(e,t.data.id,t.data.message,t.data.user,t.data.date)),this.setCounter(e.length).centerModal(e,!0)})});o.append(s.append(l).append(c)),e.html(o),this.centerModal(e,!0)})}centerModal(e,t){return e.dialog("option","position",{my:"center",at:"center",of:window}),t&&e.animate({scrollTop:e.find(".admin-notes").outerHeight()},200),this}countNotes(e,t,n){let r=new $.Deferred;return $.ajax({url:window.SITE_URL+"api/admin/note/count",data:{model_name:e,model_provider:t,item_id:n}}).done(e=>{r.resolve(e.data)}).fail(e=>{u.showError(e.responseText),r.reject(e.responseText)}),r.promise()}loadNotes(e,t,n){let r=new $.Deferred;return $.ajax({url:window.SITE_URL+"api/admin/note",data:{model_name:e,model_provider:t,item_id:n}}).done(e=>{r.resolve(e)}).fail(e=>{u.showError(e.responseText),r.reject(e.responseText)}),r.promise()}saveNote(e,t,n,r){let i=new $.Deferred;return $.ajax({url:window.SITE_URL+"api/admin/note",method:"POST",data:{model_name:e,model_provider:t,item_id:n,message:r}}).done(e=>{i.resolve(e)}).fail(e=>{u.showError(e.responseText),i.reject(e.responseText)}),i.promise()}deleteNote(e){let t=new $.Deferred;return $.ajax({url:window.SITE_URL+"api/admin/note/"+e,method:"DELETE"}).done(e=>{t.resolve(e)}).fail(e=>{u.showError(e.responseText),t.reject(e.responseText)}),t.promise()}renderMessageItem(e,t,n,r,i){let o=$("<li>").addClass("admin-notes__note"),a=$("<div>").addClass("admin-notes__note__message").html(n),s=$("<button>").addClass("admin-notes__note__delete").html("&times;"),l=$("<div>").addClass("admin-notes__note__meta"),c=$("<span>").addClass("admin-notes__note__meta__user").html(r.first_name+" "+r.last_name),u=$("<span>").addClass("admin-notes__note__meta__date").html(i);return s.on("click",()=>(this.deleteNote(t).done(()=>{o.remove(),this.centerModal(e,!1);let t=$(".admin-notes__note",e).length;this.setCounter(t),0===t&&$(".admin-notes__empty",e).show()}),!1)),o.append(a).append(s).append(l.append(c).append(u))}setCounter(e){return $(".admin-notes__counter").text(e||""),this}static showError(e){let t;try{t=JSON.parse(e)}catch(e){t={error:"An unknown error occurred"}}alert(t.error)}}var d=u,h=n(1),f=n.n(h);class p{constructor(e,t){return this.trigger("constructing"),this.index=0,this.$element=e,this.$target=$(".js-admin-repeater__target",this.$element),this.$add=$(".js-admin-repeater__add",this.$element),this.template=$(".js-admin-repeater__template",this.$element).html(),$(".js-admin-repeater__template",this.$element).remove(),this.bindEvents(),this.load(t||[]),this.trigger("constructed"),this}bindEvents(){this.trigger("binding"),this.$add.on("click",e=>(this.add(),!1)),this.$target.on("click",".js-admin-repeater__remove",e=>(this.remove($(e.currentTarget)),!1)),this.$element.on("js-admin-repeater:load",(e,t)=>{this.load(t)}).on("js-admin-repeater:clear",e=>{this.reset()}),this.trigger("bound")}add(e){(e=e||{}).index=this.index,this.trigger("adding",e);let t=$("<li>").addClass("js-admin-repeater__target__item"),n=this.template;n=f.a.render(n,e),t.html(n),this.$target.append(t),this.index++,this.trigger("added")}remove(e){let t=e.closest(".js-admin-repeater__target__item");this.trigger("removing",t),t.remove(),this.trigger("removed",t)}load(e){this.trigger("loading",e);for(let t in e)e.hasOwnProperty(t)&&this.add(e[t]);this.trigger("loaded",e)}reset(){this.trigger("resetting"),$(".js-admin-repeater__target__item",this.$target).remove(),this.index=0,this.trigger("reset")}trigger(e,t){let n={instance:this,data:t};console.log("js-admin-repeater:"+e,n)}}var m=class{constructor(){return this.repeaters=[],$(".js-admin-repeater").each((e,t)=>{let n=$(t),r=new p(n,n.data("data"));n.data("js-admin-repeater-instance",r),this.repeaters.push(r)}),this}};class g{constructor(e,t){this.$input=$(e),this.$input.data("searcher")instanceof g||(this.api=this.coalesce(this.$input.data("api"),t.api),this.isMultiple=this.coalesce(this.$input.data("multiple"),t.isMultiple,!1),this.isClearable=this.coalesce(this.$input.data("clearable"),t.isClearable,!0),this.placeholder=this.coalesce(this.$input.data("placeholder"),t.placeholder,"Search for an item"),this.minLength=this.coalesce(this.$input.data("min-length"),t.minLength,2),this.getParam=this.coalesce(this.$input.data("get-param"),t.getParam,"search"),this.formatter=this.coalesce(t.formatter,null),this.api?this.$input.removeClass("js-searcher").select2({placeholder:this.placeholder,minimumInputLength:this.minLength,multiple:this.isMultiple,allowClear:this.isClearable,ajax:{url:window.SITE_URL+"api/"+this.api,dataType:"json",quietMillis:250,data:e=>{let t={};return t[this.getParam]=e,t},results:e=>({results:this.formatResults(e.data)}),cache:!0},initSelection:(e,t)=>{let n=$(e).val();""!==n&&this.isMultiple?$.ajax({url:window.SITE_URL+"api/"+this.api+"?ids="+n,dataType:"json"}).done(e=>{t(this.formatResults(e.data))}):""!==n&&$.ajax({url:window.SITE_URL+"api/"+this.api+"/"+n,dataType:"json"}).done(e=>{t(this.formatResult(e.data))})}}):console.warn("Element is configured as a Searcher but no api has been defined",this.$input))}formatResults(e){let t=[];for(let n=0;n<e.length;n++)t.push(this.formatResult(e[n]));return t}formatResult(e){return"function"==typeof this.formatter?this.formatter.call(this,e):{id:e.id,text:e.label}}coalesce(){var e=arguments.length;for(let t=0;t<e;t++)if(null!==arguments[t]&&void 0!==arguments[t])return arguments[t];return null}}var y=class{constructor(){$(document).on("admin:js-searcher",(e,t,n)=>{n=n||{},$(t).each((e,t)=>{$(t).data("searcher",new g(t,n))})}),$(document).on("admin:refresh-ui",()=>{$(document).trigger("admin:js-searcher",[".js-searcher"])}).trigger("admin:js-searcher",[".js-searcher"])}};var v=class{constructor(){return $(".js-admin-sortable").each((function(){let e=$(this),t=e.data("handle")||null,n=e.data("axis")||"y",r=e.data("containment")||"parent";e.sortable({handle:t,axis:n,containment:r,forceHelperSize:!0,helper:function(e,t){let n=t.children(),r=t.clone();return r.children().each((function(e){$(this).width(n.eq(e).outerWidth())})),r},stop:function(){e.trigger("sortable:sort")}}).on("sortable:sort",()=>{e.find(".js-admin-sortable__order").each((function(e){$(this).val(e)}))})})),this}};let b;new a,new s,new l,new c,new d,new m,new y,b=void new v}]);