/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (function() { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./assets/js/admin.logs.site.js":
/*!**************************************!*\
  !*** ./assets/js/admin.logs.site.js ***!
  \**************************************/
/***/ (function() {

eval("/* global Mustache */\nlet _nails_logs = function() {\n    /**\n     * Avoid scope issues in callbacks and anonymous functions by referring to `this` as `base`\n     * @type {Object}\n     */\n    var base = this;\n\n    // --------------------------------------------------------------------------\n\n    /**\n     * Construct the class\n     * @return {Void}\n     */\n    base.__construct = function() {\n        base.fetchLogs();\n    };\n\n    // --------------------------------------------------------------------------\n\n    /**\n     * Fetches logs from the server\n     * @return {Void}\n     */\n    base.fetchLogs = function() {\n        $.ajax({\n            'url': window.SITE_URL + 'api/admin/logs/site',\n        })\n            .done(function(response) {\n                base.fetchLogsOk(response.data);\n            })\n            .fail(function(response) {\n\n                var data;\n\n                try {\n                    data = JSON.parse(response.responseText);\n                } catch (e) {\n                    data = {\n                        'status': 500,\n                        'error': 'An unknown error occurred.'\n                    };\n                }\n                base.fetchLogsFail(data);\n            });\n    };\n\n    // --------------------------------------------------------------------------\n\n    /**\n     * Called when fetchLogs is successful\n     * @param  {Object} logs Data returned by the server\n     * @return {Void}\n     */\n    base.fetchLogsOk = function(logs) {\n        var tpl, html;\n\n        $('#logEntries').empty();\n        $('#pleaseNote').remove();\n\n        if (logs.length > 0) {\n\n            tpl = $('#templateLogRow').html();\n\n            for (var i = 0; i < logs.length; i++) {\n\n                html = Mustache.render(tpl, logs[i]);\n                $('#logEntries').append(html);\n            }\n\n        } else {\n\n            html = $('#templateNoLogFiles').html();\n            $('#logEntries').html(html);\n        }\n    };\n\n    // --------------------------------------------------------------------------\n\n    /**\n     * Called when fetchLogs is unsuccessful\n     * @param  {Object} data Data from the server\n     * @return {Void}\n     */\n    base.fetchLogsFail = function(data) {\n        $('<div>')\n            .html('<p>' + data.error + '</p>')\n            .dialog(\n                {\n                    title: 'An error occurred',\n                    resizable: false,\n                    draggable: false,\n                    modal: true,\n                    dialogClass: 'no-close',\n                    buttons:\n                        {\n                            OK: function() {\n                                $(this).dialog('close');\n                            }\n                        }\n                })\n            .show();\n    };\n\n    // --------------------------------------------------------------------------\n\n    return base.__construct();\n}();\n\n\n//# sourceURL=webpack://nails-module-admin/./assets/js/admin.logs.site.js?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval devtool is used.
/******/ 	var __webpack_exports__ = {};
/******/ 	__webpack_modules__["./assets/js/admin.logs.site.js"]();
/******/ 	
/******/ })()
;